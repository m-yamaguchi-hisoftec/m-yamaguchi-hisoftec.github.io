<html>
    <head>
        <link rel="manifest" href="/manifest.json">
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>プッシュ通知アプリ</title>
   
        <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
        <script>
          window.OneSignalDeferred = window.OneSignalDeferred || [];
          OneSignalDeferred.push(function(OneSignal) {
            OneSignal.init({
              appId: "21e490aa-9fa9-4431-8ad9-de9f1f5863a3",
              notifyButton: {
                enable: true,
              },
            });
          });
          if('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
            navigator.serviceWorker
              .register('OneSignalSDKWorker.js')
                .then(function() { console.log("Service Worker Registered"); })
                .catch(function() { console.log("Service Worker Not Registered"); });
            });
          }
        </script>
    </head>
    <body>
        <p>プッシュ通知テスト</p>
        <button onclick="test()">Show OneSignal User ID</button>
    
        <script>
            function test() {
                window.OneSignalDeferred.getUserId().then(function(userId) {
                    alert("OneSignal User ID:" + userId);
                });
            }
        </script>
    </body>
</html>